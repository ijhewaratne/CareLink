# =============================================================================
# CareLink - Secure Document Storage Environment Configuration
# =============================================================================
# CRITICAL: Never commit this file with real values to version control!
# Copy to .env and fill in actual values
# =============================================================================

# -----------------------------------------------------------------------------
# Cloud Provider Selection
# -----------------------------------------------------------------------------
# Choose your cloud storage provider: 'gcs' or 's3'
CLOUD_PROVIDER=gcs

# -----------------------------------------------------------------------------
# Google Cloud Storage (GCS) Configuration
# -----------------------------------------------------------------------------
# GCS Project ID from Google Cloud Console
GCS_PROJECT_ID=your-gcs-project-id

# GCS Bucket Name (must be globally unique)
# SECURITY: Ensure bucket has uniform access control and is NOT public
GCS_BUCKET_NAME=carelink-verification-docs-sandbox

# Path to service account JSON key file (for local development)
# In production, use Workload Identity or attached service accounts
GOOGLE_APPLICATION_CREDENTIALS=./path/to/service-account-key.json

# -----------------------------------------------------------------------------
# AWS S3 Configuration (if using S3 instead of GCS)
# -----------------------------------------------------------------------------
# AWS Region (Sri Lanka/Asia region recommended for low latency)
AWS_REGION=ap-southeast-1

# S3 Bucket Name (must be globally unique)
# SECURITY: Ensure bucket blocks ALL public access
S3_BUCKET_NAME=carelink-verification-docs-sandbox

# AWS Credentials (for local development)
# In production, use IAM roles or AWS Secrets Manager
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# -----------------------------------------------------------------------------
# Encryption Configuration (CRITICAL - PDPA Compliance)
# -----------------------------------------------------------------------------
# AES-256 Encryption Key (64 hex characters = 32 bytes)
# SECURITY: Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Store this securely in a secrets manager (NOT in code or plain .env in production)
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# File Upload Configuration
# -----------------------------------------------------------------------------
# Maximum file size in MB (default: 5)
MAX_FILE_SIZE_MB=5

# Default signed URL expiration in minutes (default: 15)
SIGNED_URL_EXPIRATION_MINUTES=15

# -----------------------------------------------------------------------------
# Audit Logging Configuration
# -----------------------------------------------------------------------------
# Audit log destination: 'console', 'database', 'cloud-logging', 'splunk'
AUDIT_LOG_DESTINATION=console

# For database audit logging
AUDIT_DB_CONNECTION_STRING=postgresql://user:pass@localhost:5432/audit_logs

# For cloud logging (GCP)
GCP_LOG_PROJECT_ID=your-gcp-log-project

# For Splunk
SPLUNK_HEC_URL=https://splunk.example.com:8088
SPLUNK_HEC_TOKEN=your-splunk-token

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
APP_NAME=carelink-document-service
APP_VERSION=1.0.0

# =============================================================================
# SECURITY CHECKLIST
# =============================================================================
# [ ] Encryption key is 64 hex characters (generated with crypto.randomBytes)
# [ ] Cloud bucket blocks ALL public access
# [ ] Bucket has versioning enabled for document recovery
# [ ] Bucket has lifecycle policy to delete old versions
# [ ] Service account has minimal permissions (only storage.objectAdmin)
# [ ] CORS is configured only for your domain
# [ ] Audit logs are being persisted to secure storage
# [ ] .env file is in .gitignore
# [ ] Production credentials are in secrets manager (not .env)
# =============================================================================
